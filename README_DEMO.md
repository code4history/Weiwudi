# Weiwudi v1.0.0 デモサイト

## セットアップ

1. Mapboxアクセストークンの設定
   - `index.html` の以下の行を編集して、有効なMapboxアクセストークンを設定してください：
   ```javascript
   mapboxgl.accessToken = 'pk.eyJ1IjoiZXhhbXBsZSIsImEiOiJjbGV4YW1wbGUifQ.example';
   ```
   - [Mapbox](https://account.mapbox.com/access-tokens/) でアカウントを作成し、公開トークンを取得してください

2. 開発サーバーの起動
   ```bash
   pnpm run dev
   ```

3. ブラウザで http://localhost:5173 を開く

## 機能

- **スタイル切り替え**: Streets, Outdoors, Light, Dark, Satelliteから選択可能
- **キャッシュ登録**: 現在のスタイルとそのアセットをキャッシュに登録
- **範囲キャッシュ**: 現在表示されている範囲のタイルをプリフェッチ
- **キャッシュクリア**: すべてのキャッシュをクリア
- **リアルタイム情報**: キャッシュ使用量、リソース数を表示

## テスト方法

1. 地図を表示し、任意の場所にズーム・パン
2. 「キャッシュ登録」をクリックして現在のスタイルを登録
3. 「範囲キャッシュ」をクリックして表示範囲のタイルをキャッシュ
4. ネットワークを切断（開発者ツールでオフラインモードに）
5. 地図が引き続き表示されることを確認
6. キャッシュ済みの範囲内で移動できることを確認

## 注意事項

- Service Workerは初回アクセス時から有効になります（リロード不要）
- キャッシュはIndexedDBに保存され、デフォルトで500MBまで使用可能
- ベクタータイル（MVT）形式のタイルがキャッシュされます